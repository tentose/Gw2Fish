<MudPaper Class="mud-width-full py-8 px-8">
    <MudText Typo="Typo.h5">@model.Name</MudText>

    <MudTable Hover="true" Breakpoint="Breakpoint.Sm" FixedHeader="true"
          Items="@fishes"
          GroupHeaderStyle="background-color:var(--mud-palette-background-grey)"
          GroupFooterClass="mb-4"
          Dense="true">
    <ColGroup>
        <col />
        <col />
        <col />
        <col />
        <col />
        <col />
    </ColGroup>
    <HeaderContent>
        <MudTh><MudTableSortLabel SortBy="new Func<Models.Fish, object>(x=>x.Caught)">Caught</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="new Func<Models.Fish, object>(x=>RarityStringToInt(x.Rarity))">Icon</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="new Func<Models.Fish, object>(x=>x.Name)">Name</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="new Func<Models.Fish, object>(x=>string.Join(',', x.Hole))">Hole</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="new Func<Models.Fish, object>(x=>string.Join(',', x.Bait))">Bait</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="new Func<Models.Fish, object>(x=>string.Join(',', x.Time))">Time</MudTableSortLabel></MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Caught"><MudCheckBox Disabled="true" Checked="@context.Caught"></MudCheckBox></MudTd>
        <MudTd DataLabel="Icon"><MudImage Src="@string.Format("data:image/png;base64,{0}", context.Icon)" Class="@("rarity-" + context.Rarity.ToLower())" Width="40" Height="40"></MudImage></MudTd>
        <MudTd DataLabel="Name">@context.Name</MudTd>
        <MudTd DataLabel="Hole">@string.Join(',', context.Hole)</MudTd>
        <MudTd DataLabel="Bait">@string.Join(',', context.Bait)</MudTd>
        <MudTd DataLabel="Time">@string.Join(',', context.Time)</MudTd>
    </RowTemplate>
    <GroupFooterTemplate>
        <MudTh Class="mud-table-cell-custom-group mud-table-cell-custom-group-footer" colspan="5">Total Fish: @context.Items.Count()</MudTh>
    </GroupFooterTemplate>
</MudTable>
</MudPaper>

@code {
    [Parameter]
    public Models.Achievement model { get; set; }

    [Parameter]
    public IEnumerable<Models.Fish> fishes { get; set; }

    private int RarityStringToInt(string rarity)
    {
        if (rarity == "Basic")
        {
            return 0;
        }
        else if (rarity == "Fine")
        {
            return -1;
        }
        else if (rarity == "Masterwork")
        {
            return -2;
        }
        else if (rarity == "Rare")
        {
            return -3;
        }
        else if (rarity == "Exotic")
        {
            return -4;
        }
        else if (rarity == "Ascended")
        {
            return -5;
        }
        else
        {
            return -6;
        }
    }

}
